# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           cmake 1.0
PortGroup           github 1.0

github.setup        csound csound 6.18.1
categories          audio
license             LGPL-2.1+
maintainers         nomaintainer

description         A language that is used to describe sound synthesizers.

long_description    Csound is a computer programming language for dealing with \
                    sound. It is called Csound because it is written in the C \
                    programming language, as opposed to some of its \
                    predecessors. Csound was written at MIT by Barry Vercoe, \
                    based on an earlier language called Music360.

homepage            http://www.csounds.com/
github.tarball_from archive
checksums           rmd160 3702ec791eb5f98f807aed6ec3de7f4eb9deab77 \
                    sha256 b84be8237fa9258ef60fdddf36fae27b20c11665811bf5ed12540da9a9a4414e

depends_build-append \
                    port:gettext \
                    port:flex \
                    port:bison

depends_lib         port:curl \
                    port:gettext-runtime \
                    port:liblo \
                    port:libsndfile

patchfiles          MAC_OS_X_VERSION.patch

cmake.out_of_source yes
compiler.cxx_standard   2011

configure.args-append   -DFAIL_MISSING=ON \
                        -DBUILD_DSSI_OPCODES=OFF \
                        -DBUILD_JAVA_INTERFACE=OFF \
                        -DBUILD_LUA_INTERFACE=OFF \
                        -DBUILD_TESTS=OFF \
                        -DCS_FRAMEWORK_DEST=${frameworks_dir} \
                        -DUSE_ALSA=OFF \
                        -DUSE_JACK=OFF \
                        -DUSE_PORTAUDIO=OFF \
                        -DUSE_PORTMIDI=OFF \
                        -DUSE_PULSEAUDIO=OFF

variant tests description "Build tests" {
    depends_build-append    port:cunit
    configure.args-replace  -DBUILD_TESTS=OFF \
                            -DBUILD_TESTS=ON
}

# Note: fltk functionality has moved to a separate 'plugins' repo upstream.
# Ports could be created for some or all of those plugins if desired.
