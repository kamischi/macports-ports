PortSystem 1.0

name		tpop3d
version		1.5.5
categories	mail
license		GPL-2
maintainers	nomaintainer
description	fast, extensible, secure UNIX POP3 server
long_description	tpop3d is a {*}${description}

homepage	https://savannah.nongnu.org/projects/tpop3d/
master_sites	https://download.savannah.nongnu.org/releases/tpop3d/
checksums	rmd160 d4bb181edd6263c38d6e64c41a80a3f59024fd84 \
		sha256 85aca837339b41f4c01c33dadd195cad7dd5942477e773845cbabc4af30cf258

depends_lib	path:lib/libssl.dylib:openssl \
		port:tcp_wrappers

configure.args	--enable-auth-pam \
		--enable-auth-passwd \
		--enable-tls \
		--enable-tcp-wrappers \
		--mandir=${prefix}/share/man
configure.ldflags-append	-lcrypto

post-destroot	{
	xinstall -d -m 755 ${destroot}${prefix}/etc \
		${destroot}${prefix}/share/doc/${name} \
		${destroot}${prefix}/var/spool/${name}
	xinstall -m 644 ${worksrcpath}/darwin/tpop3d.conf.example \
		${destroot}${prefix}/etc
	xinstall -m 644 -W ${worksrcpath} CHANGES COPYING CREDITS FAQ HACKING \
	INSTALL PORTABILITY README README.POP-before-SMTP README.auth_mysql \
	README.darwin TODO ${destroot}${prefix}/share/doc/${name}
	destroot.keepdirs ${destroot}${prefix}/var/spool/${name}
}

if {${os.platform} eq "darwin" && ${os.major} <= 9} {
	patchfiles-append	patch-configure patch-auth_pam.c
}
